I"v<h3 id="sobre-a-documentação">Sobre a documentação</h3>

<p>Seja bem vindo à documentação da API do Atlas da Notícia.</p>

<p>O <strong>Atlas da Notícia</strong> é uma iniciativa para mapear veículos produtores de notícias – especialmente de jornalismo local – no território brasileiro.</p>

<p>Esta é uma API que implementa o protocolo <code class="language-plaintext highlighter-rouge">REST</code> para a comunicação com os sistemas com uma autenticação do tipo JWT para a segurança das aplicações.</p>

<p>Esta página contém aspectos mais técnicos sobre a API e seu uso. Caso ainda esteja no começo da sua experiência com a APIs e de compreensão de <em>endpoints</em>, por favor recorra primeiro a <a href="../utilizarAPI">este documento</a>, que detalha o passo a passo inicial para usar esse recurso.</p>

<h3 id="autenticação">Autenticação</h3>

<p>A API conta com o padrão JWT para autenticar seus usuários.</p>

<p>Para que você possa autenticar, é necessário ter um usuário cadastrado no nosso sistema. Caso ainda não tenha, <a href="https://api.atlas.jor.br/register">faça cadastro aqui</a>.</p>

<p>Para acessar os endpoints da API você deve usar o token como Bearer, incluindo-o no Header de sua requisição.</p>

<p>Com o usuário cadastrado, você pode realizar uma solicitação <code class="language-plaintext highlighter-rouge">POST</code> na nossa API com as seguintes informações:</p>

<h4 id="endpoint">Endpoint</h4>

<p><code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/v1/auth/login</code></p>

<h4 id="json-request">JSON Request</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    {
    "email": "seu@email",
    "password": "sua senha"
    }
</code></pre></div></div>

<h4 id="resposta-com-o-token-será-enviada-para-você">Resposta com o token será enviada para você</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    {
        "access_token": "seu_token",
        "token_type": "bearer",
        "expires_in": 3600
    }
</code></pre></div></div>

<h4 id="renovando-o-token">Renovando o token</h4>

<p>Para renovar o token da sua aplicação, basta realizar o refresh do mesmo pela API. Neste Endpoint, você vai realizar um POST passando o token como Bearer token no Header da Requisição de acordo com o exemplo abaixo:</p>

<h4 id="endpoint-1">Endpoint</h4>

<p><code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/v1/auth/refresh</code></p>

<p>Resposta com o novo token será enviada para você, no mesmo formanto do primeiro token.</p>

<h4 id="documentação-do-json">Documentação do JSON</h4>

<table>
  <thead>
    <tr>
      <th>COLUNA</th>
      <th>VALOR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>access_token</td>
      <td>Token de acesso para a API</td>
    </tr>
    <tr>
      <td>token_type</td>
      <td>Tipo de token</td>
    </tr>
    <tr>
      <td>expires_in</td>
      <td>Tempo em segundos de validade do token</td>
    </tr>
  </tbody>
</table>

<hr />

<h3 id="endpoints-de-dados">Endpoints de dados</h3>

<p>Endpoints são as URL’s que a API provê para o retorno dos dados. A API do Atlas da Notícia possui diversos endpoints, cada um retornando um conjunto diferente de informações.</p>

<p>A URL base da aplicação é: <code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/</code></p>

<p>A aplicação tem um controle de versão, caso a API seja atualizada de maneira a impactar nas aplicações-clientes. A versão é sempre colocada após a URL base: <code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/versão</code></p>

<p>A url então deve ficar no seguinte formato: <code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/v1</code></p>

<p>Após a versão, é necessário incluir o endpoint desejado para realizar a busca.</p>

<h4 id="filtros">Filtros</h4>

<p>A API é preparada para receber filtros de acordo com os campos desejados na consulta. Para facilitar a descoberta dos campos, a aplicação dispõe para cada endpoint, um método que retorna os campos disponíveis.</p>

<p>Os tipos de filtros disponíveis são:</p>

<table>
  <thead>
    <tr>
      <th>TIPO</th>
      <th>REPRESENTAÇÃO</th>
      <th>DESCRIÇÃO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Equalidade</td>
      <td>Parâmetro padrão na URL</td>
      <td>É um parâmetro comum na URL, baseado nos campos disnívies no endpoint</td>
    </tr>
    <tr>
      <td>Parcialidade</td>
      <td>lk</td>
      <td>É o LIKE do SQL, onde temos uma busca parcial de um conteúdo do tipo String</td>
    </tr>
    <tr>
      <td>Agrupamento</td>
      <td>Parâmetro do tipo array na URL</td>
      <td>É o IN do SQL. Para que o sistema filtre nesse formato, é necessário enviar como array.</td>
    </tr>
    <tr>
      <td>Maior Igual</td>
      <td>gt</td>
      <td>Define o início de um range de dados.</td>
    </tr>
    <tr>
      <td>Menor Igual</td>
      <td>lt</td>
      <td>Define o fim de um range de dados.</td>
    </tr>
  </tbody>
</table>
:ET
I" <h3 id="sobre-a-documentação">Sobre a documentação</h3>

<p>Seja bem vindo à documentação da API do Atlas da Notícia.</p>

<p>O <strong>Atlas da Notícia</strong> é uma iniciativa para mapear veículos produtores de notícias – especialmente de jornalismo local – no território brasileiro.</p>

<p>Esta é uma API que implementa o protocolo REST para a comunicação com os sistemas com uma autenticação do tipo JWT para a segurança das aplicações.</p>

<p>Esta página contém aspectos mais técnicos sobre a API e seu uso. Caso ainda esteja no começo da sua experiência com a APIs e de compreensão de <em>endpoints</em>, por favor recorra primeiro a <a href="../utilizarAPI">este documento</a>, que detalha o passo a passo inicial para usar esse recurso.</p>

<h3 id="autenticação">Autenticação</h3>

<p>A API conta com o padrão JWT para autenticar seus usuários.</p>

<p>Para que você possa autenticar, é necessário ter um usuário cadastrado no nosso sistema.</p>

<p><a href="https://api.atlas.jor.br/register"><button class="btn btn--dark btn--rounded btn--w-icon"> Faça o cadastro </button></a></p>

<p>Com o usuário cadastrado, você pode realizar um POST na nossa API com as seguintes informações:</p>

<h5 id="endpoint">Endpoint</h5>
<p><code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/v1/auth/login</code></p>

<h3 id="primeiro-passo-cadastro">Primeiro passo: cadastro</h3>
<p>O primeiro passo para acessar a API do <strong>Atlas da Notícia</strong> é fazendo um cadastro, criando seu próprio login e senha, que serão utilizados como credenciais de uso do nosso banco de dados.</p>

<p><a href="https://api.atlas.jor.br/register"><button class="btn btn--dark btn--rounded btn--w-icon"> Faça o cadastro </button></a></p>

<h3 id="segundo-passo-recuperação-de-senha">Segundo passo: recuperação de senha</h3>

<p><strong>Não perca seu login e senha</strong>: esse registro fará com que você tenha acesso a todos os dados da API, mas, como ainda não temos um sistema público (um <em>backend</em>) que possa ser utilizado abertamente, não é possível o próprio usuário alterar suas credenciais.</p>

<p>Caso tenha alguma dúvida e precise de uma nova senha, por favor entre mande um email para <a href="mailto:contato@atlas.jor.br">contato@atlas.jor.br</a>, e nossa equipe emitirá uma senha nova para você.</p>

<h3 id="terceiro-passo-métodos-de-acesso">Terceiro passo: métodos de acesso</h3>
<p>Por enquanto, ao fazer o registro, você possui acesso apenas ao retorno de dados da API. Para saber mais como utilizar esse recurso, vá para a página de documentação completa ou veja nosso breve tutorial abaixo.</p>

<p><a href="https://api.atlas.jor.br/docs"><button class="btn btn--dark btn--rounded btn--w-icon"> Acesse a documentação da API </button></a></p>

<p>A API funciona com geração de tokens, e para isso você vai precisar utilizar o usuário e senha que criou pelo portal do <strong>Atlas da Notícia</strong>.</p>

<p>Há várias ferramentas e métodos de acesso aos dados. Abaixo, listamos alguns métodos eficientes utilizando um <em>client</em> de acesso a APIs e mediante uso de programação.</p>

<h4 id="acesso-via-postman">Acesso via Postman</h4>

<p>Postman é um aplicativo que, entre outras coisas, facilita o acesso aos dados de uma API. Você pode fazer o download do aplicativo <a href="https://www.getpostman.com/">neste link</a>.</p>

<p>Abra o Postman e clique em <code class="language-plaintext highlighter-rouge">New &gt;&gt; Get Request</code>.</p>

<p><img src="../../graficos/postman_get.png" alt="postman get" /></p>

<p>Na barra de naveração é necessário selecionar a opção <code class="language-plaintext highlighter-rouge">POST</code> e colocar a seguinte URL: <code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/v1/auth/login</code>. Essa URL vai fazer com que sua requisição de login seja feita ao servidor do <em>Atlas da Notícia</em>.</p>

<p><img src="../../graficos/postman_barra_nav.png" alt="postman get" /></p>

<p>Agora é necessário colocar as credenciais necessárias para que o login seja feito. Utilize seu login e senha escolhidos no momento do registro da API.</p>

<p>Para isso, clique na aba <code class="language-plaintext highlighter-rouge">Body</code> e coloque copie e cole o seguinte código substituindo os valores abaixo por sua própria credencial:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "email": "nome@email.com",
    "password": "12345678"
}
</code></pre></div></div>

<p>Isso vai gerar um <code class="language-plaintext highlighter-rouge">access_token</code>, com o qual você vai poder retornar dados do nosso banco de dados. Esse recurso é utilizado para dar mais segurança às informações e evitar abusos a nossos servidores gratuitos.</p>

<p>Certifique-se de que o formato escolhido esteja com a caixa selecionada <code class="language-plaintext highlighter-rouge">RAW</code> e que o retorno seja em <code class="language-plaintext highlighter-rouge">JSON</code>, conforme as flechas indicam na figura abaixo.</p>

<p><img src="../../graficos/postman_bearer.png" alt="postman get" /></p>

<p>Clique no botão azul <code class="language-plaintext highlighter-rouge">SEND</code>, o que retornará seu token mais abaixo na tela.</p>

<p>O próximo passo é criar uma aba nova no Postman e utilizar a função <code class="language-plaintext highlighter-rouge">GET</code>. Isso que vai retornar os dados para dentro de seu aplicativo.</p>

<p>Mas antes, é necessário informar à sua aplicação o token que você vai utilizar, caso contrário o servidor não vai reconhecer seu login. Clique em <code class="language-plaintext highlighter-rouge">Authorization</code> e escolha o tipo de autorização como <code class="language-plaintext highlighter-rouge">Type = Bearer</code>. Na caixa do lado
é possível colar o token que você acabou de gerar na outra aba. Lembrando que esse token se renova a cada uma hora.</p>

<p>Um exemplo de API que você pode testar para ver se seu retorno está funcionando é <code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/v1/data/analytic?estado=RO</code>, a qual retorna todos os veículos do Estado de Rondônia.</p>

<p>Para saber as URLs válidas, que retornam dados, é preciso ler a documentação da API e entender as combinações possíveis. Por exemplo a URL <code class="language-plaintext highlighter-rouge">https://api.atlas.jor.br/api/v1/data/analytic?segmento=Online&amp;estado=SP</code> retorna todos os veículos online do Estado de São Paulo.</p>

<p><a href="https://api.atlas.jor.br/docs"><button class="btn btn--dark btn--rounded btn--w-icon"> Acesse a documentação da API </button></a></p>

<p>Basta clicar em <code class="language-plaintext highlighter-rouge">SEND</code> e ver abaixo na tela o resultado.</p>

<p><img src="../../graficos/postman_results.png" alt="postman get" /></p>

<h4 id="acesso-via-r-ou-python">Acesso via R ou Python</h4>

<p>O acesso utilizando a linguagem de programação R ou Python é fácil e direto. <a href="https://gist.github.com/sergiospagnuolo/f7b5bdd2fc430c791746a39d99319406">Este é o link para o gist</a> que contém os códigos</p>

<script src="https://gist.github.com/sergiospagnuolo/f7b5bdd2fc430c791746a39d99319406.js"></script>

:ET